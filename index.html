<!doctype html>
<html>
    <head>
        <title>Kiyotaki Wright Hazlett Experiment</title>
        <meta charset='UTF-8'>
        <script src="js/utils.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/script.js" type="text/javascript" charset="utf-8"></script>
        <style>
            html {
                font-family: "Trebuchet MS", Helvetica, sans-serif;
                padding-left: 10px;
                padding-top: 10px;
            }
        </style>
    </head>
    <body>
        <script src="js/vendors/notie.js" type="text/javascript" charset="utf-8"></script>
        
        <font size="5">Kiyotaki Wright Hazlett Experiment</font>
        <br><br>            
        <input type="text" id="numbPersonsTxt" value="24" size="4"/>
        <small>: number of persons</small>
        <br>
        <input type="text" id="numbRoundsTxt" value="10" size="4"/>
        <small>: number of rounds</small>
        <!--<br>
        <input type="text" id="storageAtxt" value="1" size="4"/>
        <small>: storage costs for good A</small>
        <br>
        <input type="text" id="storageBtxt" value="4" size="4"/>
        <small>: storage costs for good B</small>
        <br>
        <input type="text" id="storageCtxt" value="9" size="4"/>
        <small>: storage costs for good C</small>
        <br>
        <input type="text" id="startPointsTxt" value="40" size="4"/>
        <small>: start points</small>
        <br>
        <input type="text" id="consumeBonusTxt" value="20" size="4"/>
        <small>: consume bonus</small>
        -->
        <br><br>
        <input type="button" value="run simulation" id="runSimBtn"/>
        <br><br>
        <!--<div id="logDiv"></div>--> <!-- TODO -->
        
        <script>
            
            storageCosts['A'] = 1;
            storageCosts['B'] = 4;
            storageCosts['C'] = 9;
            
            var startPoints = 40;
            var consumeBonus = 20;
            var n = 24; //atm must be dividable by 2 and 3
            var rounds = 10;
            
            document.getElementById('runSimBtn').onclick = function(){
                /*if(this.value == 'reset')
                    location.reload();
                else{
                    this.value = 'reset';*/
                    n = parseInt(document.getElementById('numbPersonsTxt').value);
                    if(n % 2 != 0 || n % 3 != 0)
                        notie.alert(3, 'the number of persons must be divisible by <b>2</b> <i>and</i> <b>3</b> <small>(this might change at a later point)</small>', 5);
                    else{
                        rounds = parseInt(document.getElementById('numbRoundsTxt').value);
                        /*
                        storageCosts['A'] = parseInt(document.getElementById('storageAtxt').value);
                        storageCosts['B'] = parseInt(document.getElementById('storageBtxt').value);
                        storageCosts['C'] = parseInt(document.getElementById('storageCtxt').value);
                        startPoints = parseInt(document.getElementById('startPointsTxt').value);
                        consumeBonus = parseInt(document.getElementById('consumeBonusTxt').value);
                        */
                        runSim();
                    }
                //}
            };

            function runSim(){
                print('<b><font size="5" color="green">initializing</font></b>');
                print();
                print('<font color="gray">total number of persons = ' + n);
                print('rounds = ' + rounds);
                print('storage costs = A: ' + storageCosts['A'] + ', B: ' + storageCosts['B'] + ', C: ' + storageCosts['C']);
                print('start points = ' + startPoints)
                print('consume bonus = ' + consumeBonus + '</font>');  
                print('<font color="gray">total number of goods = ' + n);  
                print();
                createPersons();
                print();
                print('<font color="gray">number of persons = 1: ' + personTypeAmounts[1] + ', 2: ' + personTypeAmounts[2] + ', 3: ' + personTypeAmounts[3]);
                print('<font color="gray">number of goods = A: ' + goodsStartAmounts['A'] + ', B: ' + goodsStartAmounts['B'] + ', C: ' + goodsStartAmounts['C'] );
                print();                
                print('<b><font size="5" color="blue">start simulation</font></b>');
                runRounds(rounds);
                print();
                print('<b><font size="5" color="blue">end simulation</font></b>');
                print();
                print('<b><font size="5" color="red">market analysis</font></b>');
                print();
                runAnalysis();
                print();
            };

        </script>
    </body>
</html>
